[{"/Users/misxiao/Documents/Study_Deme/test-xylink-app/src/reportWebVitals.ts":"1","/Users/misxiao/Documents/Study_Deme/test-xylink-app/src/index.tsx":"2","/Users/misxiao/Documents/Study_Deme/test-xylink-app/src/component/index.tsx":"3","/Users/misxiao/Documents/Study_Deme/test-xylink-app/src/component/Login/index.tsx":"4","/Users/misxiao/Documents/Study_Deme/test-xylink-app/src/utils/config.ts":"5"},{"size":425,"mtime":1607322348291,"results":"6","hashOfConfig":"7"},{"size":481,"mtime":1607322705536,"results":"8","hashOfConfig":"7"},{"size":3504,"mtime":1607333631085,"results":"9","hashOfConfig":"7"},{"size":3011,"mtime":1607333253892,"results":"10","hashOfConfig":"11"},{"size":774,"mtime":1607328895697,"results":"12","hashOfConfig":"7"},{"filePath":"13","messages":"14","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1rlymnj",{"filePath":"15","messages":"16","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"17","messages":"18","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"19"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1s027px",{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/misxiao/Documents/Study_Deme/test-xylink-app/src/reportWebVitals.ts",[],"/Users/misxiao/Documents/Study_Deme/test-xylink-app/src/index.tsx",[],"/Users/misxiao/Documents/Study_Deme/test-xylink-app/src/component/index.tsx",["24","25","26","27","28","29"],"import React, { useState } from 'react'\nimport { Row, message } from 'antd'\nimport { THIRD, SERVER, ENV } from '../utils/config'\nimport xyRTC from '@xylink/xy-rtc-sdk'\nimport Login, { IUser } from './Login'\nimport {\n  IDisconnected,\n} from '../type/index'\n\nimport '../style/index.scss'\nimport Client from '@xylink/xy-rtc-sdk/lib/main/client'\n\nlet client: Client | null = null;\n\nconst Home: React.FC = () => {\n  const [isThird] = useState(THIRD)\n  // 呼叫状态\n  const [callMeeting, setCallMeeting] = useState(false)\n  // 是否呼叫中\n  const [callLoading, setCallLoading] = useState(false)\n  // 配置环境，第三方集成不需要配置，默认是线上环境\n  const [env, setEnv] = useState(ENV)\n  // 摄像头状态\n  const [video, setVideo] = useState<'muteVideo' | 'unmuteVideo'>(() => {\n    return false ? 'muteVideo' : 'unmuteVideo';\n  })\n  // 麦克风状态\n  const [audio, setAudio] = useState<'mute' | 'unmute'>(() => {\n    return false ? 'mute' : 'unmute';\n  });\n\n  const [user, setUser] = useState<IUser>({\n    phone: '',\n    password: '',\n    meeting: '',\n    meetingPassword: '',\n    meetingName: '',\n    muteVideo: false,\n    muteAudio: false\n  })\n\n  const handleSubmit = (values: IUser) => {\n    const isSupport = xyRTC.checkSupportWebRTC()\n\n    if (!isSupport) {\n      message.info('Not support webrtc')\n      return\n    }\n    setUser(values)\n    join()\n  }\n\n  const join = () => {\n    setCallMeeting(true)\n    setCallLoading(true)\n\n    try {\n      const { meeting, meetingPassword, meetingName, muteAudio, muteVideo } = user\n      const { wssServer, httpServer, logServer } = SERVER(env)\n\n      client = xyRTC.createClient({\n        // 注意，第三方集成时，默认是prd环境，不需要配置wss/http/log server地址；\n        wssServer,\n        httpServer,\n        logServer,\n        muteAudio,\n        muteVideo,\n        container: {\n          offsetHeight: 92\n        }\n      })\n\n      initEventListener(client)\n\n    } catch (err) {\n      console.log('入会失败: ', err)\n      // disconnected(err.msg || '呼叫异常，请稍后重试', 'PEER_NET_DISCONNECT')\n    }\n  }\n\n  const onChangeInput = (val: any, type: string) => {\n    const inputVal = val\n\n    const users = { ...user, [type]: inputVal }\n    setUser(users)\n    if (type === \"muteVideo\") {\n      setVideo(val ? \"muteVideo\" : \"unmuteVideo\");\n    }\n\n    if (type === \"muteAudio\") {\n      setAudio(val ? \"mute\" : \"unmute\");\n    }\n  }\n\n  // 挂断会议\n  const disconnected = (msg = '', reason?: string) => {\n    message.info(msg)\n    stop(reason)\n  }\n\n  const stop = (reason: string = 'OK') => {\n  }\n\n  const initEventListener = (client: Client) => {\n    client.on('disconnected', (e: IDisconnected) => {\n      const showMessage = (e.detail && e.detail.message) || '呼叫异常，请稍后重试'\n      disconnected(showMessage, 'EXPIRED')\n    })\n  }\n\n  const renderForm = () => {\n    if (!callMeeting && !callLoading) {\n      return (\n        <div className=\"login\">\n          <h1 className=\"title\">XY RTC DEMO</h1>\n          <div className=\"sub-title\">\n            <span>设置环境：</span>\n          </div>\n          <Row justify=\"center\">\n            <Login\n              isThird={isThird}\n              onHandleSubmit={handleSubmit}\n              user={user}\n              onChangeInput={onChangeInput}\n            />\n          </Row>\n        </div>\n      )\n    }\n\n    return null\n  }\n\n  return (\n    <div className=\"container\">\n      {renderForm()}\n    </div>\n  )\n}\n\nexport default Home\n","/Users/misxiao/Documents/Study_Deme/test-xylink-app/src/component/Login/index.tsx",[],"/Users/misxiao/Documents/Study_Deme/test-xylink-app/src/utils/config.ts",[],{"ruleId":"30","severity":1,"message":"31","line":22,"column":15,"nodeType":"32","messageId":"33","endLine":22,"endColumn":21},{"ruleId":"30","severity":1,"message":"34","line":24,"column":10,"nodeType":"32","messageId":"33","endLine":24,"endColumn":15},{"ruleId":"30","severity":1,"message":"35","line":28,"column":10,"nodeType":"32","messageId":"33","endLine":28,"endColumn":15},{"ruleId":"30","severity":1,"message":"36","line":58,"column":15,"nodeType":"32","messageId":"33","endLine":58,"endColumn":22},{"ruleId":"30","severity":1,"message":"37","line":58,"column":24,"nodeType":"32","messageId":"33","endLine":58,"endColumn":39},{"ruleId":"30","severity":1,"message":"38","line":58,"column":41,"nodeType":"32","messageId":"33","endLine":58,"endColumn":52},"@typescript-eslint/no-unused-vars","'setEnv' is assigned a value but never used.","Identifier","unusedVar","'video' is assigned a value but never used.","'audio' is assigned a value but never used.","'meeting' is assigned a value but never used.","'meetingPassword' is assigned a value but never used.","'meetingName' is assigned a value but never used."]